'use strict';

var _express = require('express');

var _express2 = _interopRequireDefault(_express);

var _cors = require('cors');

var _cors2 = _interopRequireDefault(_cors);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _apolloServerExpress = require('apollo-server-express');

var _Resolvers = require('Data/Resolvers/Resolvers');

var _jsonwebtoken = require('jsonwebtoken');

var _jsonwebtoken2 = _interopRequireDefault(_jsonwebtoken);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }
// graphql

var typeDefs = 'type Parametros {\r\n    id:ID\r\n    Nombre: String\r\n    Valor: String\r\n    Eliminado: Int\r\n}\r\ntype Configuraciones  {\r\n    id:ID\r\n    Nombre: String\r\n    Valor: [ConfiguracionesValor]\r\n    Eliminado: Int\r\n}\r\ntype AsignacionCliente {\r\n        id:ID\r\n        Edificio:String\r\n        Nivel:String\r\n        Habitacion:String\r\n        Cliente:String\r\n        FechaIngreso:String\r\n        FechaSalida:String\r\n        Eliminado: Int\r\n}\r\ntype ConfiguracionesValor  {\r\n    Nombre: String\r\n    Valor: String\r\n}\r\ntype ListaDeValores  {\r\n    id:ID\r\n    Nombre: String\r\n    Valor: [ListaDeValoresValor]\r\n    Eliminado: Int\r\n}\r\ntype  ListaDeValoresValor {\r\n    Nombre: String\r\n    Valor:String\r\n}\r\ntype Clientes {\r\n    id:ID\r\n    Nombre: String\r\n    Apellido:String\r\n    Edad: Int\r\n    Direccion: String\r\n    Dpi: String\r\n    Nit: String\r\n    Sexo: String\r\n    Municipio: String\r\n    Departamento: String\r\n    Eliminado:Int\r\n    Responsable:Int\r\n}\r\ntype Edificio  {\r\n    id:ID\r\n    Nombre:String\r\n    Latitud:String\r\n    Longitud:String\r\n    Estructura: [Nivel]\r\n    Eliminado: Int\r\n}\r\ntype Nivel {\r\n    Nombre:String\r\n    Nivel:Int\r\n    Habitaciones:[Habitacion]\r\n}\r\ntype Habitacion {\r\n     Nombre: String\r\n     Habitacion: Int\r\n     Capacidad: Int\r\n      Ocupados:Int\r\n}\r\ntype Bitacora  {\r\n    id:ID\r\n    Evento:String\r\n    Documento:String\r\n    UsuarioId:ID\r\n    Fecha:String\r\n    Pagina:String\r\n    Data:[BitacoraData]\r\n}\r\ntype  BitacoraData {\r\n    Nombre: String\r\n    Data:String\r\n}\r\ntype BitacoraSesion {\r\n    id:ID\r\n    UsuarioId:ID\r\n    FechaInicio:String\r\n    FechaCierre:String\r\n}\r\ntype Pacientes {\r\n    id:ID\r\n    Nombre: String\r\n    Apellido: String\r\n    Edad: Int\r\n    Direccion:String\r\n    Dpi:String\r\n    Nit:String\r\n    Sexo:String\r\n    Municipio:String\r\n    Departamento:String\r\n    Eliminado: Int\r\n}\r\ntype Hospital {\r\n    id:ID\r\n    Nombre:String\r\n    Descripcion:String\r\n    Latitud:String\r\n    Longitud:String\r\n    Eliminado: Int\r\n}\r\ntype Productos {\r\n    id:ID\r\n    Nombre:String\r\n    Descripcion:String\r\n    SKU: String\r\n    CodigoBarra:String\r\n    Clasificacion:String\r\n    Tipo:String\r\n    Cantidad: Int\r\n    Precio: Int\r\n    Eliminado: Int\r\n}\r\ntype HistorialProductos {\r\n    id:ID\r\n    ProductoId: ID\r\n    Fecha: String\r\n    Cantidad: Int\r\n    Precio: Int\r\n}\r\ntype EntradaSalidaInventario {\r\n    id:ID\r\n    DonacionId: ID,\r\n    UsuarioId: ID\r\n    Productos: [Productos]\r\n    Responsable: String\r\n    Tipo:Int\r\n    Fecha:String\r\n    Estado:String\r\n    Total:Int\r\n}\r\ntype AsignarPaciente {\r\n       id:ID\r\n    Hospitales:String\r\n    Clientes:[Clientes]\r\n    Pacientes: [Pacientes]\r\n    Fecha: String\r\n    Estado: String\r\n    FechaSalida:String\r\n    Eliminado:Int\r\n    Observaciones:String\r\n}\r\ntype Donacion  {\r\n    id: ID\r\n    UsuarioId:ID\r\n    Responsable: String\r\n    Donante: String\r\n    Tipo:Int\r\n    Fecha:String\r\n    Estado:String\r\n    Cantidad:Int\r\n}\r\ntype CajaChica  {\r\n    id:ID\r\n    Cantidad: Int\r\n    Fecha:String\r\n}\r\ntype EntradaSalidaCajaChica  {\r\n    id:ID\r\n    DonacionId: ID\r\n    UsuarioId: ID\r\n    Responsable: String\r\n    Cantidad: Int\r\n    Tipo:Int\r\n    Fecha:String\r\n    Estado:String\r\n}\r\ntype HistorialCajaChica  {\r\n    id:ID\r\n    Cantidad: Int\r\n    Fecha:String\r\n}\r\ntype Token {\r\n    token:String!\r\n}\r\ntype Usuarios {\r\n    id: ID\r\n    Usuario: String\r\n    Nombre: String\r\n    Password: String\r\n    Rol: [Roles]\r\n    Eliminado: Int\r\n}\r\ntype Roles {\r\n    id: ID\r\n    Nombre: String\r\n    Descripcion: String\r\n    Permiso: [Permisos]\r\n    Eliminado: Int\r\n}\r\ntype Permisos {\r\n    id: ID\r\n    Nombre: String\r\n    Descripcion: String\r\n    URL:String\r\n    Menu:String\r\n    Activo: Boolean\r\n    Opcion:[Opciones]\r\n    Eliminado: Int\r\n}\r\ntype Opciones {\r\n    id: ID\r\n    Nombre: String\r\n    Descripcion: String\r\n    Activo: Boolean\r\n    Eliminado: Int\r\n}\r\ntype Edi {\r\nEdificio:String\r\nNivel:String\r\nHabitacion:String\r\n}\r\ntype asigClier1 {\r\nTotal:Float\r\n_id:String\r\n}\r\ntype asigClier2 {\r\nTotal:Float\r\n_id:String  \r\n}\r\ntype asigpas {\r\nFecha:String\r\nEstado:String\r\n}\r\ntype asigpas1 {\r\nTotal:Float\r\n_id:String\r\n}\r\ntype asigpas2 {\r\nTotal:Float\r\n_id:[Clientes]\r\n}\r\ntype Municipios {\r\n    Municipio:String\r\n}\r\ntype producr1 {\r\nTotal:Float\r\n_id:String\r\n}\r\ntype donacior1 {\r\nTotal:Float\r\n_id:String\r\n}\r\ntype donacior {\r\n   Tipo:String\r\n   id:String\r\n}type Query {\r\n    """Seleccionar todos los parametros"""\r\n    getparametros(limit:Int, Offset: Int):[Parametros]\r\n    """Seleccionar un parametro por id"""\r\n    getParametro(id:ID): Parametros\r\n    """Seleccionar todas las configuraciones"""\r\n    getConfiguraciones(limit:Int, Offset:Int):[Configuraciones]\r\n    """Seleccionar solo una configuracion por id"""\r\n    getConfiguracion(id:ID): Configuraciones\r\n    """Seleccionar todas las listas de valores"""\r\n    getListaDeValores(limit:Int, Offset:Int):[ListaDeValores]\r\n    """Seleccionar una sola lista de valores por id"""\r\n    getListaDeValor(id:ID): ListaDeValores\r\n \r\n  """Seleccionar todas las listas de valores"""\r\n    getAsignacionClientes(limit:Int, Offset:Int):[AsignacionCliente]\r\n    """Seleccionar una sola lista de valores por id"""\r\n    getAsignacionCliente(id:ID): AsignacionCliente\r\n    """Seleccionar todos los clientes"""    \r\n    getclientes(limit:Int, Offset:Int):[Clientes]\r\n    """Seleccionar un cliente por su id"""\r\n    getCliente(id:ID): Clientes\r\n    """seleccionar responsables"""\r\n    getresponsables(limit:Int,Offset:Int):[Clientes]\r\n    """select responsable"""\r\n    getResponsable(id:ID):Clientes\r\n    """Seleccionar todos los edificios"""\r\n    getedificios(limit:Int, Offset:Int):[Edificio]\r\n    """Seleccionar un edificio por su id"""\r\n    getedificio(id:ID): Edificio\r\n    """Seleccionar todas las bitacoras"""\r\n    getbitacoras(limit:Int, Offset:Int):[Bitacora]\r\n    """Seleccionar una bitacora por su id"""\r\n    getbitacora(id:ID): Bitacora\r\n    """Seleccionar todas las bitacoras de sesion"""\r\n    getbitacoraSesiones(limit:Int, Offset:Int):[BitacoraSesion]\r\n    """Seleccionar una bitacora de sesion por su id"""\r\n    getbitacoraSesion(id:ID): BitacoraSesion\r\n    """Seleccionar todos los pacientes"""\r\n    getpacientes(limit:Int, Offset:Int):[Pacientes]\r\n    """Seleccionar un paciente por su id"""\r\n    getpaciente(id:ID): Pacientes\r\n    """Seleccionar todos los hospitales"""\r\n    getHospitales(limit:Int, Offset:Int):[Hospital]\r\n    """Seleccionar un hospital por id"""\r\n    getHospital(id:ID): Hospital\r\n    """Seleccionar todos los productos"""\r\n    getproductos(limit:Int, Offset:Int):[Productos]\r\n    """Seleccionar un producto por su id"""\r\n    getproducto(id:ID): Productos\r\n    """Seleccionar todos los historiales de productos"""\r\n    gethistorialProductos(limit:Int, Offset:Int):[HistorialProductos]\r\n    """Seleccionar un historial de producto por su id"""\r\n    gethistorialProducto(id:ID): HistorialProductos\r\n    """Seleccionar todas las entradas y salidas de inventarios"""\r\n    getentradaSalidaInventarios(limit:Int, Offset:Int):[EntradaSalidaInventario]\r\n    """Seleccionar una entrada o salida de inventario por su id"""\r\n    getentradaSalidaInventario(id:ID): EntradaSalidaInventario\r\n    """Seleccionar todas las donaciones"""\r\n    getdonaciones(limit:Int, Offset:Int):[Donacion]\r\n    """Seleccionar una donacion por su id"""\r\n    getdonacion(id:ID): Donacion\r\n    """Seleccionar todas las cajas chica"""\r\n    getcajaChicas(limit:Int, Offset:Int):[CajaChica]\r\n    """Seleccionar una caja chica por su id"""\r\n    getcajaChica(id:ID): CajaChica\r\n    """Seleccionar todas las entradas y salidas de caja chica"""\r\n    getentradaSalidaCajaChicas(limit:Int, Offset:Int):[EntradaSalidaCajaChica]\r\n    """Seleccionar una entrada o salida de caja chica por su id"""\r\n    getentradaSalidaCajaChica(id:ID): EntradaSalidaCajaChica\r\n    """Seleccionar todos los historiales de caja chica"""\r\n    gethistorialCajaChicas(limit:Int, Offset:Int):[HistorialCajaChica]\r\n    """Seleccionar un historial de caja chica por su id"""\r\n    gethistorialCajaChica(id:ID): HistorialCajaChica\r\n    """Seleccionar todos los roles"""\r\n    getroles(limit:Int, Offset:Int):[Roles]\r\n    """Seleccionar un rol por su id"""\r\n    getrol(id:ID): Roles\r\n    """Seleccionar todos los permisos"""\r\n    getpermisos(limit:Int, Offset:Int):[Permisos]\r\n    """Seleccionar un permiso por su id"""\r\n    getpermiso(id:ID): Permisos\r\n    """Seleccionar todos los usuarios"""\r\n    getusuarios(limit:Int, Offset:Int):[Usuarios]\r\n    """Seleccionar un usuario por su id"""\r\n    getusuario(id:ID): Usuarios\r\n    """Seleccionar todos los AsignarPaciente"""\r\n        getasignacionpacientes(limit:Int, Offset:Int):[AsignarPaciente]\r\n    """Seleccionar un AsignarPaciente por su id"""\r\n        getasignacionpaciente(id:ID): AsignarPaciente\r\n   \r\n    obtenerUsuario:Usuarios \r\nreportesasigClier1(id:ID):[asigClier1]\r\nreportesasigClier2(id:ID):[asigClier2]\r\nreportesasigpas1(id:ID):[asigpas1]\r\nreportesasigpas2(id:ID):[asigpas2]\r\nreportesproducr1(id:ID):[producr1]\r\nreportesdonacior1(id:ID):[donacior1]\r\n}input Parametrosinput {\r\n    id:ID\r\n    Nombre: String\r\n    Valor: String\r\n    Eliminado: Int\r\n}\r\ninput AsignacionClienteInput {\r\n      id:ID\r\n        Edificio:String\r\n        Nivel:String\r\n        Habitacion:String\r\n        Cliente:String\r\n        FechaIngreso:String\r\n        FechaSalida:String\r\n        Eliminado: Int\r\n        Edificios:Edificioinput\r\n}\r\ninput Configuracionesinput  {\r\n    id:ID\r\n    Nombre: String\r\n    Valor: [ConfiguracionesValorinput]\r\n    Eliminado: Int\r\n}\r\ninput ConfiguracionesValorinput {\r\n    Nombre: String\r\n    Valor:String\r\n}\r\ninput ListaDeValoresinput  {\r\n    id:ID\r\n    Nombre: String\r\n    Valor: [ListaDeValoresValorinput]\r\n    Eliminado: Int\r\n}\r\ninput  ListaDeValoresValorinput {\r\n    Nombre: String\r\n    Valor:String\r\n}\r\ninput Clientesinput {\r\n    id:ID\r\n    Nombre: String\r\n    Apellido:String\r\n    Edad: Int\r\n    Direccion: String\r\n    Dpi: String\r\n    Nit: String\r\n    Sexo: String\r\n    Municipio: String\r\n    Departamento: String\r\n    Eliminado:Int\r\n    Responsable:Int\r\n}\r\ninput Edificioinput  {\r\n    id:ID\r\n    Nombre:String\r\n    Latitud:String\r\n    Longitud:String\r\n    Estructura: [Nivelinput]\r\n    Eliminado: Int\r\n}\r\ninput Nivelinput {\r\n     Nombre:String\r\n     Nivel:Int\r\n     Habitaciones:[Habitacioninput]\r\n}\r\ninput Habitacioninput {\r\n     Nombre:String\r\n     Habitacion:Int\r\n     Capacidad:Int\r\n     Ocupados:Int\r\n}\r\ninput Bitacorainput  {\r\n    id:ID\r\n    Evento:String\r\n    Documento:String\r\n    UsuarioId:ID\r\n    Fecha:String\r\n    Pagina:String\r\n    Data:[BitacoraDatainput]   \r\n}\r\ninput BitacoraDatainput {\r\n    Nombre: String\r\n    Data:String\r\n}\r\ninput BitacoraSesioninput {\r\n    id:ID\r\n    UsuarioId:ID\r\n    FechaInicio:String\r\n    FechaCierre:String\r\n}\r\ninput Pacientesinput {\r\n    id:ID\r\n\tNombre: String\r\n    Apellido: String\r\n    Edad: Int\r\n    Direccion:String\r\n    Dpi:String\r\n    Nit:String\r\n    Sexo:String\r\n    Municipio:String\r\n    Departamento:String\r\n    Eliminado: Int\r\n}\r\ninput Hospitalinput {\r\n    id:ID\r\n    Nombre:String\r\n    Descripcion:String\r\n    Latitud:String\r\n    Longitud:String\r\n    Eliminado: Int\r\n}\r\ninput Productosinput {\r\n    id:ID\r\n    Nombre:String\r\n    Descripcion:String\r\n    SKU: String\r\n    CodigoBarra:String\r\n    Clasificacion:String\r\n    Tipo:String\r\n    Cantidad: Int \r\n    Precio: Int \r\n    Eliminado: Int\r\n}\r\ninput HistorialProductosinput {\r\n    id:ID\r\n    ProductoId: ID\r\n    Fecha: String\r\n    Cantidad: Int\r\n    Precio: Int \r\n}\r\ninput EntradaSalidaInventarioinput {\r\n    id:ID\r\n\tDonacionId: ID,\r\n\tUsuarioId: ID\r\n\tProductos: [Productosinput]\r\n    Responsable: String\r\n    Tipo:Int\r\n    Fecha:String\r\n    Estado:String\r\n    Total:Int\r\n}\r\ninput AsignacionPacienteinput {\r\n    id:ID\r\n    Hospitales:String\r\n    Clientes:[Clientesinput]\r\n    Pacientes: [Pacientesinput]\r\n    Fecha: String\r\n    Estado: String\r\n    FechaSalida:String\r\n    Eliminado:Int\r\n    Observaciones:String\r\n}\r\ninput Donacioninput  {\r\n    id: ID\r\n\tUsuarioId:ID\r\n    Responsable: String\r\n    Donante: String\r\n    Tipo:Int\r\n    Fecha:String\r\n    Estado:String\r\n    Cantidad: Int\r\n}\r\ninput CajaChicainput  {\r\n    id:ID\r\n    Cantidad: Int\r\n    Fecha:String\r\n}\r\ninput EntradaSalidaCajaChicainput  {\r\n    id:ID\r\n\tDonacionId: ID\r\n\tUsuarioId: ID\r\n    Responsable: String\r\n    Cantidad: Int\r\n    Tipo:Int\r\n    Fecha:String\r\n    Estado:String\r\n}\r\ninput HistorialCajaChicainput  {\r\n    id:ID\r\n    Cantidad: Int\r\n    Fecha:String\r\n}\r\ninput Rolesinput {\r\n    id: ID\r\n    Nombre: String\r\n    Descripcion: String\r\n    Permiso: [Permisosinput]\r\n    Eliminado: Int\r\n}\r\ninput Permisosinput {\r\n    id: ID\r\n    Nombre: String\r\n    Descripcion: String\r\n    URL:String\r\n    Menu:String\r\n    Activo: Boolean\r\n    Opcion:[Opcionesinput]\r\n    Eliminado: Int\r\n}\r\ninput Usuariosinput {\r\n    id: ID\r\n    Usuario: String\r\n    Nombre: String\r\n    Password: String\r\n    Rol: [Rolesinput]\r\n    Eliminado: Int\r\n}\r\ninput Opcionesinput {\r\n    id: ID\r\n    Nombre: String\r\n    Descripcion: String\r\n    Activo: Boolean\r\n    Eliminado: Int\r\n}\r\ntype Mutation {\r\n    """Crea parametros """\r\n    crearParametros(input:Parametrosinput):Parametros\r\n    """Crear la Configuracion """\r\n    crearConfiguracion(input:Configuracionesinput):Configuraciones\r\n  """Crear la Asignacion Cliente """\r\n  \r\n  crearAsignacionCliente(input:AsignacionClienteInput):String\r\n    crearListaDeValores(input:ListaDeValoresinput):ListaDeValores\r\n    """Crea Los Clientes """\r\n    crearClientes(input:Clientesinput):Clientes\r\n    """CrearResponsable """\r\n    crearResponsables(input:Clientesinput):Clientes\r\n    """Crea el Edificio"""\r\n    crearEdificio(input:Edificioinput):Edificio\r\n    """Crea la Bitacora"""\r\n    crearBitacora(input:Bitacorainput):Bitacora\r\n    """Crea la Bitacora de Sesion"""\r\n    crearBitacoraSesion(input:BitacoraSesioninput):BitacoraSesion\r\n    """Crea Los Pacientes"""\r\n    crearPacientes(input:Pacientesinput):Pacientes\r\n    """Crea el Hospital"""\r\n    crearHospital(input:Hospitalinput):Hospital\r\n    """Crea los Productos"""\r\n    crearProductos(input:Productosinput):Productos\r\n    """Crea el Historial de Productos"""\r\n    crearHistorialProductos(input:HistorialProductosinput):HistorialProductos\r\n    """Crea las Entradas y Salidas del Inventario"""\r\n    crearEntradaSalidaInventario(input:EntradaSalidaInventarioinput):EntradaSalidaInventario\r\n    """Crear Asignacion Pacientes"""\r\n    crearAsignacionPacientes(input:AsignacionPacienteinput):AsignarPaciente\r\n    """Crea las Donaciones al Albergue"""\r\n    crearDonacion(input:Donacioninput):Donacion\r\n    """Crea la Caja Chica"""\r\n    crearCajaChica(input:CajaChicainput):CajaChica\r\n    """Crea la Entrada y Salida de la caja Chica"""\r\n    crearEntradaSalidaCajaChica(input:EntradaSalidaCajaChicainput):EntradaSalidaCajaChica\r\n    """Crea el Historial de la Caja Chica"""\r\n    crearHistorialCajaChica(input:HistorialCajaChicainput):HistorialCajaChica\r\n    """Crea Los Roles """\r\n    crearRoles(input:Rolesinput):String\r\n    """Crea los Permisos """\r\n    crearPermisos(input:Permisosinput):String\r\n    """Crea los Usuarios """\r\n    crearUsuarios(input:Usuariosinput):String\r\n    """AgregarPermisos Los  Roles """\r\n    AgregarPermisos(input:Rolesinput):Roles\r\n    """Actualiza_Los parametros """\r\n    actualizarParametros(input:Parametrosinput):Parametros\r\n    """Actualiza_Los Configuracion """\r\n    actualizarConfiguracion(input:Configuracionesinput):Configuraciones\r\n    actualizarListaDeValores(input:ListaDeValoresinput):ListaDeValores\r\n    """Actualiza_Los Los Clientes """\r\n    actualizarCliente(input:Clientesinput):Clientes\r\n    """Actualiza_Los Los Responsable """\r\n    actualizarResponsable(input:Clientesinput):Clientes\r\n    """Actualiza_Los el Edificio"""\r\n    actualizarEdificio(input:Edificioinput):Edificio\r\n    """Actualiza_Los la Bitacora"""\r\n    actualizarBitacora(input:Bitacorainput):Bitacora\r\n    """Actualiza_Los la Bitacora de Sesion"""\r\n    actualizarBitacoraSesion(input:BitacoraSesioninput):BitacoraSesion\r\n    """Actualiza_Los Los Pacientes"""\r\n    actualizarPacientes(input:Pacientesinput):Pacientes\r\n    """Actualiza_Los el Hospital"""\r\n    actualizarHospital(input:Hospitalinput):Hospital\r\n    """Actualiza_Los los Productos"""\r\n    actualizarProductos(input:Productosinput):Productos\r\n    """Actualiza_Los el Historial de Productos"""\r\n    actualizarHistorialProductos(input:HistorialProductosinput):HistorialProductos\r\n    """Actualiza_Los las Entradas y Salidas del Inventario"""\r\n    actualizarEntradaSalidaInventario(input:EntradaSalidaInventarioinput):EntradaSalidaInventario\r\n    """Actualiza_Los las Donaciones al Albergue"""\r\n    actualizarDonacion(input:Donacioninput):Donacion\r\n    """Actualiza_Los la Caja Chica"""\r\n    actualizarCajaChica(input:CajaChicainput):CajaChica\r\n    """Actualiza_Los la Entrada y Salida de la caja Chica"""\r\n    actualizarEntradaSalidaCajaChica(input:EntradaSalidaCajaChicainput):EntradaSalidaCajaChica\r\n    """Actualiza_Los el Historial de la Caja Chica"""\r\n    actualizarHistorialCajaChica(input:HistorialCajaChicainput):HistorialCajaChica\r\n    """Actualiza_Los Los Roles """\r\n    actualizarRoles(input:Rolesinput):Roles\r\n    """Actualiza_Los los Permisos """\r\n    actualizarPermisos(input:Permisosinput):Permisos\r\n    """Actualiza_Los los Usuarios """\r\n    actualizarUsuarios(input:Usuariosinput):Usuarios\r\n    eliminarParametros(id:ID!):String\r\n    eliminarConfiguracion(id:ID!):String\r\n    eliminarListaDeValores(id:ID!):String\r\n    eliminarClientes (id:ID!):String\r\n    eliminarResponsables(id:ID!):String\r\n    eliminarEdificio(id:ID!):String\r\n    eliminarBitacora(id:ID!):String\r\n    eliminarBitacoraSesion(id:ID!):String\r\n    eliminarPacientes(id:ID!):String\r\n    eliminarHospital(id:ID!):String\r\n    eliminarProductos(id:ID!):String\r\n    eliminarHistorialProductos(id:ID!):String\r\n    eliminarEntradaSalidaInventario(id:ID!):String\r\n    eliminarDonacion(id:ID!):String\r\n    eliminarCajaChica(id:ID!):String\r\n    eliminarEntradaSalidaCajaChica(id:ID!):String\r\n    eliminarHistorialCajaChica(id:ID!):String\r\n    eliminarRoles(id:ID!):String\r\n    eliminarPermisos(id:ID!):String\r\n    eliminarUsuarios(id:ID!):String\r\n    eliminarAsignacionPaciente(id:ID!):String\r\n   eliminarAsignacionCliente(id:ID!,Edificio:String,Nivel:String,Habitacion:String):String\r\n    autenticarUsuario(usuario:String!,password:String!):Token\r\n}\r\n\r\n\r\n\r\n\r\n';


var app = (0, _express2.default)();

app.use(_express2.default.static(_path2.default.join(__dirname, 'cliente/build')));

var server = new _apolloServerExpress.ApolloServer({
    typeDefs: typeDefs,
    resolvers: _Resolvers.resolvers,
    context: function () {
        var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(_ref2) {
            var req = _ref2.req;
            var token, usuarioActual;
            return regeneratorRuntime.wrap(function _callee$(_context) {
                while (1) {
                    switch (_context.prev = _context.next) {
                        case 0:
                            //obtener el token del servidor
                            token = req.headers['authorization'];

                            if (!(token !== "null")) {
                                _context.next = 12;
                                break;
                            }

                            _context.prev = 2;
                            _context.next = 5;
                            return _jsonwebtoken2.default.verify(token, process.env.SECRETO);

                        case 5:
                            usuarioActual = _context.sent;

                            // agregamos el usuario actual al request

                            req.usuarioActual = usuarioActual;
                            return _context.abrupt('return', {
                                usuarioActual: usuarioActual
                            });

                        case 10:
                            _context.prev = 10;
                            _context.t0 = _context['catch'](2);

                        case 12:
                        case 'end':
                            return _context.stop();
                    }
                }
            }, _callee, undefined, [[2, 10]]);
        }));

        return function context(_x) {
            return _ref.apply(this, arguments);
        };
    }()
});

app.get('*', function (req, res) {
    res.sendFile(_path2.default.join(__dirname + '/cliente/build/index.html'));
});

var port = process.env.PORT || 4000;
server.applyMiddleware({ app: app });
app.listen({ port: port }, function () {
    return console.log('El servidor esta corriendo http://localhost:' + port + server.graphqlPath);
});
